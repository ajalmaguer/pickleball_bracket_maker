import{R as L,r as f,a as _e,j as y}from"./index-DE2pUbUL.js";function tr(e){return!Number.isInteger(e)||e<=0?[]:Array.from({length:e},(t,n)=>n+1)}function nr(e,t=!1){const n=e.length,r=[],o=Math.ceil(n/4)*4,s=o/2,i=o-n,a=Math.ceil(i/2);for(t&&(console.log("for n=",n),console.log("targetLength",o),console.log("targetEmptyPairs",s),console.log("byeCount",i),console.log("countOfPairsWithByes",a));r.length<s-a;)r.push({left:void 0,right:void 0});i===1?r.push({left:void 0,right:null}):i===2?r.push({left:null,right:null}):i===3&&(r.push({left:null,right:void 0}),r.push({left:null,right:null})),r[0].left=e[0];let u=1;for(let c=0;c<r.length;c++)r[c].right===void 0&&u<e.length&&(r[c].right=e[u],u++);for(let c=r.length-1;c>=0;c--)r[c].left===void 0&&u<e.length&&(r[c].left=e[u],u++);return t&&console.table(r),r}function rr(e){const t=[];for(let n=0;n<e.length;n+=2)n+1<e.length&&t.push({court:n/2+1,team1:[e[n].left,e[n].right],team2:[e[n+1].left,e[n+1].right]});return t}function or(e){const t=[...e];if(t.length<=1)return[...t];const r=[t[0]];return r.push(...t.slice(2)),r.push(t[1]),r}function sr(e){const t=e,n=t-1;let r=tr(t);const o={games:[]};for(let s=0;s<n;s++){const i=nr(r),a=rr(i);o.games.push(a),r=or(r)}return o}const xe={};function fn(e){return"init"in e}function wt(e){return!!e.write}function Kt(e){return"v"in e||"e"in e}function Qe(e){if("e"in e)throw e.e;if((xe?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v}const et=new WeakMap;function hn(e){var t;return tt(e)&&!!((t=et.get(e))!=null&&t[0])}function ir(e){const t=et.get(e);t?.[0]&&(t[0]=!1,t[1].forEach(n=>n()))}function xt(e,t){let n=et.get(e);if(!n){n=[!0,new Set],et.set(e,n);const r=()=>{n[0]=!1};e.then(r,r)}n[1].add(t)}function tt(e){return typeof e?.then=="function"}function gn(e,t,n){if(!n.p.has(e)){n.p.add(e);const r=()=>n.p.delete(e);t.then(r,r)}}function vn(e,t,n){var r;const o=new Set;for(const s of((r=n.get(e))==null?void 0:r.t)||[])n.has(s)&&o.add(s);for(const s of t.p)o.add(s);return o}const ar=(e,t,...n)=>t.read(...n),cr=(e,t,...n)=>t.write(...n),lr=(e,t)=>{var n;return(n=t.unstable_onInit)==null?void 0:n.call(t,e)},ur=(e,t,n)=>{var r;return(r=t.onMount)==null?void 0:r.call(t,n)},dr=(e,t)=>{const n=P(e),r=n[0],o=n[9];if((xe?"production":void 0)!=="production"&&!t)throw new Error("Atom is undefined or null");let s=r.get(t);return s||(s={d:new Map,p:new Set,n:0},r.set(t,s),o?.(e,t)),s},fr=e=>{const t=P(e),n=t[1],r=t[3],o=t[4],s=t[5],i=t[6],a=t[13],u=[],c=l=>{try{l()}catch(d){u.push(d)}};do{i.f&&c(i.f);const l=new Set,d=l.add.bind(l);r.forEach(h=>{var g;return(g=n.get(h))==null?void 0:g.l.forEach(d)}),r.clear(),s.forEach(d),s.clear(),o.forEach(d),o.clear(),l.forEach(c),r.size&&a(e)}while(r.size||s.size||o.size);if(u.length)throw new AggregateError(u)},hr=e=>{const t=P(e),n=t[1],r=t[2],o=t[3],s=t[11],i=t[14],a=t[17],u=[],c=new WeakSet,l=new WeakSet,d=Array.from(o);for(;d.length;){const h=d[d.length-1],g=s(e,h);if(l.has(h)){d.pop();continue}if(c.has(h)){if(r.get(h)===g.n)u.push([h,g]);else if((xe?"production":void 0)!=="production"&&r.has(h))throw new Error("[Bug] invalidated atom exists");l.add(h),d.pop();continue}c.add(h);for(const p of vn(h,g,n))c.has(p)||d.push(p)}for(let h=u.length-1;h>=0;--h){const[g,p]=u[h];let b=!1;for(const v of p.d.keys())if(v!==g&&o.has(v)){b=!0;break}b&&(i(e,g),a(e,g)),r.delete(g)}},gr=(e,t)=>{var n,r;const o=P(e),s=o[1],i=o[2],a=o[3],u=o[6],c=o[7],l=o[11],d=o[12],h=o[13],g=o[14],p=o[16],b=o[17],v=l(e,t);if(Kt(v)&&(s.has(t)&&i.get(t)!==v.n||Array.from(v.d).every(([m,I])=>g(e,m).n===I)))return v;v.d.clear();let x=!0;function w(){s.has(t)&&(b(e,t),h(e),d(e))}function S(m){var I;if(m===t){const M=l(e,m);if(!Kt(M))if(fn(m))nt(e,m,m.init);else throw new Error("no atom init");return Qe(M)}const N=g(e,m);try{return Qe(N)}finally{v.d.set(m,N.n),hn(v.v)&&gn(t,v.v,N),(I=s.get(m))==null||I.t.add(t),x||w()}}let C,R;const A={get signal(){return C||(C=new AbortController),C.signal},get setSelf(){return(xe?"production":void 0)!=="production"&&!wt(t)&&console.warn("setSelf function cannot be used with read-only atom"),!R&&wt(t)&&(R=(...m)=>{if((xe?"production":void 0)!=="production"&&x&&console.warn("setSelf function cannot be called in sync"),!x)try{return p(e,t,...m)}finally{h(e),d(e)}}),R}},D=v.n;try{const m=c(e,t,S,A);return nt(e,t,m),tt(m)&&(xt(m,()=>C?.abort()),m.then(w,w)),(n=u.r)==null||n.call(u,t),v}catch(m){return delete v.v,v.e=m,++v.n,v}finally{x=!1,D!==v.n&&i.get(t)===D&&(i.set(t,v.n),a.add(t),(r=u.c)==null||r.call(u,t))}},vr=(e,t)=>{const n=P(e),r=n[1],o=n[2],s=n[11],i=[t];for(;i.length;){const a=i.pop(),u=s(e,a);for(const c of vn(a,u,r)){const l=s(e,c);o.set(c,l.n),i.push(c)}}},pn=(e,t,...n)=>{const r=P(e),o=r[3],s=r[6],i=r[8],a=r[11],u=r[12],c=r[13],l=r[14],d=r[15],h=r[17];let g=!0;const p=v=>Qe(l(e,v)),b=(v,...x)=>{var w;const S=a(e,v);try{if(v===t){if(!fn(v))throw new Error("atom not writable");const C=S.n,R=x[0];nt(e,v,R),h(e,v),C!==S.n&&(o.add(v),(w=s.c)==null||w.call(s,v),d(e,v));return}else return pn(e,v,...x)}finally{g||(c(e),u(e))}};try{return i(e,t,p,b,...n)}finally{g=!1}},pr=(e,t)=>{var n;const r=P(e),o=r[1],s=r[3],i=r[6],a=r[11],u=r[15],c=r[18],l=r[19],d=a(e,t),h=o.get(t);if(h&&!hn(d.v)){for(const[g,p]of d.d)if(!h.d.has(g)){const b=a(e,g);c(e,g).t.add(t),h.d.add(g),p!==b.n&&(s.add(g),(n=i.c)==null||n.call(i,g),u(e,g))}for(const g of h.d||[])if(!d.d.has(g)){h.d.delete(g);const p=l(e,g);p?.t.delete(t)}}},bn=(e,t)=>{var n;const r=P(e),o=r[1],s=r[4],i=r[6],a=r[10],u=r[11],c=r[12],l=r[13],d=r[14],h=r[16],g=u(e,t);let p=o.get(t);if(!p){d(e,t);for(const b of g.d.keys())bn(e,b).t.add(t);if(p={l:new Set,d:new Set(g.d.keys()),t:new Set},o.set(t,p),(n=i.m)==null||n.call(i,t),wt(t)){const b=()=>{let v=!0;const x=(...w)=>{try{return h(e,t,...w)}finally{v||(l(e),c(e))}};try{const w=a(e,t,x);w&&(p.u=()=>{v=!0;try{w()}finally{v=!1}})}finally{v=!1}};s.add(b)}}return p},br=(e,t)=>{var n;const r=P(e),o=r[1],s=r[5],i=r[6],a=r[11],u=r[19],c=a(e,t);let l=o.get(t);if(l&&!l.l.size&&!Array.from(l.t).some(d=>{var h;return(h=o.get(d))==null?void 0:h.d.has(t)})){l.u&&s.add(l.u),l=void 0,o.delete(t),(n=i.u)==null||n.call(i,t);for(const d of c.d.keys()){const h=u(e,d);h?.t.delete(t)}return}return l},nt=(e,t,n)=>{const r=P(e)[11],o=r(e,t),s="v"in o,i=o.v;if(tt(n))for(const a of o.d.keys())gn(t,n,r(e,a));o.v=n,delete o.e,(!s||!Object.is(i,o.v))&&(++o.n,tt(i)&&ir(i))},mr=(e,t)=>{const n=P(e)[14];return Qe(n(e,t))},yr=(e,t,...n)=>{const r=P(e),o=r[12],s=r[13],i=r[16];try{return i(e,t,...n)}finally{s(e),o(e)}},wr=(e,t,n)=>{const r=P(e),o=r[12],s=r[18],i=r[19],u=s(e,t).l;return u.add(n),o(e),()=>{u.delete(n),i(e,t),o(e)}},mn=new WeakMap,P=e=>{const t=mn.get(e);if((xe?"production":void 0)!=="production"&&!t)throw new Error("Store must be created by buildStore to read its building blocks");return t};function xr(...e){const t={get(r){const o=P(t)[21];return o(t,r)},set(r,...o){const s=P(t)[22];return s(t,r,...o)},sub(r,o){const s=P(t)[23];return s(t,r,o)}},n=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},ar,cr,lr,ur,dr,fr,hr,gr,vr,pn,pr,bn,br,nt,mr,yr,wr,void 0].map((r,o)=>e[o]||r);return mn.set(t,Object.freeze(n)),t}const yn={};let Sr=0;function Jt(e,t){const n=`atom${++Sr}`,r={toString(){return(yn?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=Cr,r.write=Dr),t&&(r.write=t),r}function Cr(e){return e(this)}function Dr(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}function Rr(){return xr()}let Te;function Er(){return Te||(Te=Rr(),(yn?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Te),globalThis.__JOTAI_DEFAULT_STORE__!==Te&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Te}const Ar={},kr=f.createContext(void 0);function wn(e){return f.useContext(kr)||Er()}const St=e=>typeof e?.then=="function",Ct=e=>{e.status||(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}))},Mr=L.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Ct(e),e)}),vt=new WeakMap,Gt=(e,t)=>{let n=vt.get(e);return n||(n=new Promise((r,o)=>{let s=e;const i=c=>l=>{s===c&&r(l)},a=c=>l=>{s===c&&o(l)},u=()=>{try{const c=t();St(c)?(vt.set(c,n),s=c,c.then(i(c),a(c)),xt(c,u)):r(c)}catch(c){o(c)}};e.then(i(e),a(e)),xt(e,u)}),vt.set(e,n)),n};function Ir(e,t){const{delay:n,unstable_promiseStatus:r=!L.use}={},o=wn(),[[s,i,a],u]=f.useReducer(l=>{const d=o.get(e);return Object.is(l[0],d)&&l[1]===o&&l[2]===e?l:[d,o,e]},void 0,()=>[o.get(e),o,e]);let c=s;if((i!==o||a!==e)&&(u(),c=o.get(e)),f.useEffect(()=>{const l=o.sub(e,()=>{if(r)try{const d=o.get(e);St(d)&&Ct(Gt(d,()=>o.get(e)))}catch{}if(typeof n=="number"){setTimeout(u,n);return}u()});return u(),l},[o,e,n,r]),f.useDebugValue(c),St(c)){const l=Gt(c,()=>o.get(e));return r&&Ct(l),Mr(l)}return c}function Nr(e,t){const n=wn();return f.useCallback((...o)=>{if((Ar?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...o)},[n,e])}function Dt(e,t){return[Ir(e),Nr(e)]}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Tr=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),qt=e=>{const t=Tr(e);return t.charAt(0).toUpperCase()+t.slice(1)},xn=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),_r=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},u)=>f.createElement("svg",{ref:u,...jr,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:xn("lucide",o),...!s&&!_r(a)&&{"aria-hidden":"true"},...a},[...i.map(([c,l])=>f.createElement(c,l)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=(e,t)=>{const n=f.forwardRef(({className:r,...o},s)=>f.createElement(Lr,{ref:s,iconNode:t,className:xn(`lucide-${Or(qt(e))}`,`lucide-${e}`,r),...o}));return n.displayName=qt(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Br=at("calendar",Pr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$r=at("grip-vertical",zr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wr=at("users",Fr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hr=at("x",Ur),It={},Xr=Symbol((It?"production":void 0)!=="production"?"RESET":""),Sn=e=>typeof e?.then=="function";function Vr(e=()=>{try{return window.localStorage}catch(n){(It?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let r,o;const s={getItem:(u,c)=>{var l,d;const h=p=>{if(p=p||"",r!==p){try{o=JSON.parse(p,t?.reviver)}catch{return c}r=p}return o},g=(d=(l=e())==null?void 0:l.getItem(u))!=null?d:null;return Sn(g)?g.then(h):h(g)},setItem:(u,c)=>{var l;return(l=e())==null?void 0:l.setItem(u,JSON.stringify(c,void 0))},removeItem:u=>{var c;return(c=e())==null?void 0:c.removeItem(u)}},i=u=>(c,l,d)=>u(c,h=>{let g;try{g=JSON.parse(h||"")}catch{g=d}l(g)});let a;try{a=(n=e())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(u,c)=>{if(!(e()instanceof window.Storage))return()=>{};const l=d=>{d.storageArea===e()&&d.key===u&&c(d.newValue)};return window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}}),a&&(s.subscribe=i(a)),s}const Yr=Vr();function Cn(e,t,n=Yr,r){const o=Jt(t);return(It?"production":void 0)!=="production"&&(o.debugPrivate=!0),o.onMount=i=>{i(n.getItem(e,t));let a;return n.subscribe&&(a=n.subscribe(e,i,t)),a},Jt(i=>i(o),(i,a,u)=>{const c=typeof u=="function"?u(i(o)):u;return c===Xr?(a(o,t),n.removeItem(e)):Sn(c)?c.then(l=>(a(o,l),n.setItem(e,l))):(a(o,c),n.setItem(e,c))})}const Kr=Cn("schedule",null),Dn=Cn("playerNames",["","","",""]);function Jr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const ct=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Se(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Nt(e){return"nodeType"in e}function z(e){var t,n;return e?Se(e)?e:Nt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ot(e){const{Document:t}=z(e);return e instanceof t}function We(e){return Se(e)?!1:e instanceof z(e).HTMLElement}function Rn(e){return e instanceof z(e).SVGElement}function Ce(e){return e?Se(e)?e.document:Nt(e)?Ot(e)?e:We(e)||Rn(e)?e.ownerDocument:document:document:document}const ee=ct?f.useLayoutEffect:f.useEffect;function Tt(e){const t=f.useRef(e);return ee(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Gr(){const e=f.useRef(null),t=f.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Be(e,t){t===void 0&&(t=[e]);const n=f.useRef(e);return ee(()=>{n.current!==e&&(n.current=e)},t),n}function Ue(e,t){const n=f.useRef();return f.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function rt(e){const t=Tt(e),n=f.useRef(null),r=f.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function Rt(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let pt={};function He(e,t){return f.useMemo(()=>{if(t)return t;const n=pt[e]==null?0:pt[e]+1;return pt[e]=n,e+"-"+n},[e,t])}function En(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[u,c]of a){const l=s[u];l!=null&&(s[u]=l+e*c)}return s},{...t})}}const we=En(1),ze=En(-1);function qr(e){return"clientX"in e&&"clientY"in e}function _t(e){if(!e)return!1;const{KeyboardEvent:t}=z(e.target);return t&&e instanceof t}function Zr(e){if(!e)return!1;const{TouchEvent:t}=z(e.target);return t&&e instanceof t}function Et(e){if(Zr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return qr(e)?{x:e.clientX,y:e.clientY}:null}const $e=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[$e.Translate.toString(e),$e.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Zt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Qr(e){return e.matches(Zt)?e:e.querySelector(Zt)}const eo={display:"none"};function to(e){let{id:t,value:n}=e;return L.createElement("div",{id:t,style:eo},n)}function no(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return L.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function ro(){const[e,t]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const An=f.createContext(null);function oo(e){const t=f.useContext(An);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function so(){const[e]=f.useState(()=>new Set),t=f.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[f.useCallback(r=>{let{type:o,event:s}=r;e.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[e]),t]}const io={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ao={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function co(e){let{announcements:t=ao,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=io}=e;const{announce:s,announcement:i}=ro(),a=He("DndLiveRegion"),[u,c]=f.useState(!1);if(f.useEffect(()=>{c(!0)},[]),oo(f.useMemo(()=>({onDragStart(d){let{active:h}=d;s(t.onDragStart({active:h}))},onDragMove(d){let{active:h,over:g}=d;t.onDragMove&&s(t.onDragMove({active:h,over:g}))},onDragOver(d){let{active:h,over:g}=d;s(t.onDragOver({active:h,over:g}))},onDragEnd(d){let{active:h,over:g}=d;s(t.onDragEnd({active:h,over:g}))},onDragCancel(d){let{active:h,over:g}=d;s(t.onDragCancel({active:h,over:g}))}}),[s,t])),!u)return null;const l=L.createElement(L.Fragment,null,L.createElement(to,{id:r,value:o.draggable}),L.createElement(no,{id:a,announcement:i}));return n?_e.createPortal(l,n):l}var O;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(O||(O={}));function ot(){}function Qt(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function lo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const J=Object.freeze({x:0,y:0});function uo(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function fo(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ho(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function en(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function kn(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}const go=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=en(t),s=[];for(const i of r){const{id:a}=i,u=n.get(a);if(u){const c=en(u),l=o.reduce((h,g,p)=>h+uo(c[p],g),0),d=Number((l/4).toFixed(4));s.push({id:a,data:{droppableContainer:i,value:d}})}}return s.sort(fo)};function vo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,a=s-n;if(r<o&&n<s){const u=t.width*t.height,c=e.width*e.height,l=i*a,d=l/(u+c-l);return Number(d.toFixed(4))}return 0}const po=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const u=vo(a,t);u>0&&o.push({id:i,data:{droppableContainer:s,value:u}})}}return o.sort(ho)};function bo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Mn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:J}function mo(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const yo=mo(1);function wo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function xo(e,t,n){const r=wo(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:a}=r,u=e.left-i-(1-o)*parseFloat(n),c=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),l=o?e.width/o:e.width,d=s?e.height/s:e.height;return{width:l,height:d,top:c,right:u+l,bottom:c+d,left:u}}const So={ignoreTransform:!1};function De(e,t){t===void 0&&(t=So);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:l}=z(e).getComputedStyle(e);c&&(n=xo(n,c,l))}const{top:r,left:o,width:s,height:i,bottom:a,right:u}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:u}}function tn(e){return De(e,{ignoreTransform:!0})}function Co(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Do(e,t){return t===void 0&&(t=z(e).getComputedStyle(e)),t.position==="fixed"}function Ro(e,t){t===void 0&&(t=z(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function lt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Ot(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!We(o)||Rn(o)||n.includes(o))return n;const s=z(e).getComputedStyle(o);return o!==e&&Ro(o,s)&&n.push(o),Do(o,s)?n:r(o.parentNode)}return e?r(e):n}function In(e){const[t]=lt(e,1);return t??null}function bt(e){return!ct||!e?null:Se(e)?e:Nt(e)?Ot(e)||e===Ce(e).scrollingElement?window:We(e)?e:null:null}function Nn(e){return Se(e)?e.scrollX:e.scrollLeft}function On(e){return Se(e)?e.scrollY:e.scrollTop}function At(e){return{x:Nn(e),y:On(e)}}var T;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(T||(T={}));function Tn(e){return!ct||!e?!1:e===document.scrollingElement}function _n(e){const t={x:0,y:0},n=Tn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const Eo={x:.2,y:.2};function Ao(e,t,n,r,o){let{top:s,left:i,right:a,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=Eo);const{isTop:c,isBottom:l,isLeft:d,isRight:h}=_n(e),g={x:0,y:0},p={x:0,y:0},b={height:t.height*o.y,width:t.width*o.x};return!c&&s<=t.top+b.height?(g.y=T.Backward,p.y=r*Math.abs((t.top+b.height-s)/b.height)):!l&&u>=t.bottom-b.height&&(g.y=T.Forward,p.y=r*Math.abs((t.bottom-b.height-u)/b.height)),!h&&a>=t.right-b.width?(g.x=T.Forward,p.x=r*Math.abs((t.right-b.width-a)/b.width)):!d&&i<=t.left+b.width&&(g.x=T.Backward,p.x=r*Math.abs((t.left+b.width-i)/b.width)),{direction:g,speed:p}}function ko(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function jn(e){return e.reduce((t,n)=>we(t,At(n)),J)}function Mo(e){return e.reduce((t,n)=>t+Nn(n),0)}function Io(e){return e.reduce((t,n)=>t+On(n),0)}function No(e,t){if(t===void 0&&(t=De),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);In(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Oo=[["x",["left","right"],Mo],["y",["top","bottom"],Io]];class jt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=lt(n),o=jn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,i,a]of Oo)for(const u of i)Object.defineProperty(this,u,{get:()=>{const c=a(r),l=o[s]-c;return this.rect[u]+l},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class je{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function To(e){const{EventTarget:t}=z(e);return e instanceof t?e:Ce(e)}function mt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var V;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(V||(V={}));function nn(e){e.preventDefault()}function _o(e){e.stopPropagation()}var E;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(E||(E={}));const Ln={start:[E.Space,E.Enter],cancel:[E.Esc],end:[E.Space,E.Enter,E.Tab]},jo=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case E.Right:return{...n,x:n.x+25};case E.Left:return{...n,x:n.x-25};case E.Down:return{...n,y:n.y+25};case E.Up:return{...n,y:n.y-25}}};class Lt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new je(Ce(n)),this.windowListeners=new je(z(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(V.Resize,this.handleCancel),this.windowListeners.add(V.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(V.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&No(r),n(J)}handleKeyDown(t){if(_t(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=Ln,coordinateGetter:i=jo,scrollBehavior:a="smooth"}=o,{code:u}=t;if(s.end.includes(u)){this.handleEnd(t);return}if(s.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:c}=r.current,l=c?{x:c.left,y:c.top}:J;this.referenceCoordinates||(this.referenceCoordinates=l);const d=i(t,{active:n,context:r.current,currentCoordinates:l});if(d){const h=ze(d,l),g={x:0,y:0},{scrollableAncestors:p}=r.current;for(const b of p){const v=t.code,{isTop:x,isRight:w,isLeft:S,isBottom:C,maxScroll:R,minScroll:A}=_n(b),D=ko(b),m={x:Math.min(v===E.Right?D.right-D.width/2:D.right,Math.max(v===E.Right?D.left:D.left+D.width/2,d.x)),y:Math.min(v===E.Down?D.bottom-D.height/2:D.bottom,Math.max(v===E.Down?D.top:D.top+D.height/2,d.y))},I=v===E.Right&&!w||v===E.Left&&!S,N=v===E.Down&&!C||v===E.Up&&!x;if(I&&m.x!==d.x){const M=b.scrollLeft+h.x,Y=v===E.Right&&M<=R.x||v===E.Left&&M>=A.x;if(Y&&!h.y){b.scrollTo({left:M,behavior:a});return}Y?g.x=b.scrollLeft-M:g.x=v===E.Right?b.scrollLeft-R.x:b.scrollLeft-A.x,g.x&&b.scrollBy({left:-g.x,behavior:a});break}else if(N&&m.y!==d.y){const M=b.scrollTop+h.y,Y=v===E.Down&&M<=R.y||v===E.Up&&M>=A.y;if(Y&&!h.x){b.scrollTo({top:M,behavior:a});return}Y?g.y=b.scrollTop-M:g.y=v===E.Down?b.scrollTop-R.y:b.scrollTop-A.y,g.y&&b.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(t,we(ze(d,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Lt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Ln,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function rn(e){return!!(e&&"distance"in e)}function on(e){return!!(e&&"delay"in e)}class Pt{constructor(t,n,r){var o;r===void 0&&(r=To(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:i}=s;this.props=t,this.events=n,this.document=Ce(i),this.documentListeners=new je(this.document),this.listeners=new je(r),this.windowListeners=new je(z(i)),this.initialCoordinates=(o=Et(s))!=null?o:J,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(V.Resize,this.handleCancel),this.windowListeners.add(V.DragStart,nn),this.windowListeners.add(V.VisibilityChange,this.handleCancel),this.windowListeners.add(V.ContextMenu,nn),this.documentListeners.add(V.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(on(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(rn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(V.Click,_o,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(V.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const u=(n=Et(t))!=null?n:J,c=ze(o,u);if(!r&&a){if(rn(a)){if(a.tolerance!=null&&mt(c,a.tolerance))return this.handleCancel();if(mt(c,a.distance))return this.handleStart()}if(on(a)&&mt(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}t.cancelable&&t.preventDefault(),i(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===E.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Lo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Bt extends Pt{constructor(t){const{event:n}=t,r=Ce(n.target);super(t,Lo,r)}}Bt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Po={move:{name:"mousemove"},end:{name:"mouseup"}};var kt;(function(e){e[e.RightClick=2]="RightClick"})(kt||(kt={}));class Bo extends Pt{constructor(t){super(t,Po,Ce(t.event.target))}}Bo.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===kt.RightClick?!1:(r?.({event:n}),!0)}}];const yt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class zo extends Pt{constructor(t){super(t,yt)}static setup(){return window.addEventListener(yt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(yt.move.name,t)};function t(){}}}zo.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var Le;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Le||(Le={}));var st;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(st||(st={}));function $o(e){let{acceleration:t,activator:n=Le.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=st.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:l,delta:d,threshold:h}=e;const g=Wo({delta:d,disabled:!s}),[p,b]=Gr(),v=f.useRef({x:0,y:0}),x=f.useRef({x:0,y:0}),w=f.useMemo(()=>{switch(n){case Le.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Le.DraggableRect:return o}},[n,o,u]),S=f.useRef(null),C=f.useCallback(()=>{const A=S.current;if(!A)return;const D=v.current.x*x.current.x,m=v.current.y*x.current.y;A.scrollBy(D,m)},[]),R=f.useMemo(()=>a===st.TreeOrder?[...c].reverse():c,[a,c]);f.useEffect(()=>{if(!s||!c.length||!w){b();return}for(const A of R){if(r?.(A)===!1)continue;const D=c.indexOf(A),m=l[D];if(!m)continue;const{direction:I,speed:N}=Ao(A,m,w,t,h);for(const M of["x","y"])g[M][I[M]]||(N[M]=0,I[M]=0);if(N.x>0||N.y>0){b(),S.current=A,p(C,i),v.current=N,x.current=I;return}}v.current={x:0,y:0},x.current={x:0,y:0},b()},[t,C,r,b,s,i,JSON.stringify(w),JSON.stringify(g),p,c,R,l,JSON.stringify(h)])}const Fo={x:{[T.Backward]:!1,[T.Forward]:!1},y:{[T.Backward]:!1,[T.Forward]:!1}};function Wo(e){let{delta:t,disabled:n}=e;const r=Rt(t);return Ue(o=>{if(n||!r||!o)return Fo;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[T.Backward]:o.x[T.Backward]||s.x===-1,[T.Forward]:o.x[T.Forward]||s.x===1},y:{[T.Backward]:o.y[T.Backward]||s.y===-1,[T.Forward]:o.y[T.Forward]||s.y===1}}},[n,t,r])}function Uo(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ue(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function Ho(e,t){return f.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...s]},[]),[e,t])}var Fe;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Fe||(Fe={}));var Mt;(function(e){e.Optimized="optimized"})(Mt||(Mt={}));const sn=new Map;function Xo(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=f.useState(null),{frequency:a,measure:u,strategy:c}=o,l=f.useRef(e),d=v(),h=Be(d),g=f.useCallback(function(x){x===void 0&&(x=[]),!h.current&&i(w=>w===null?x:w.concat(x.filter(S=>!w.includes(S))))},[h]),p=f.useRef(null),b=Ue(x=>{if(d&&!n)return sn;if(!x||x===sn||l.current!==e||s!=null){const w=new Map;for(let S of e){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const C=S.node.current,R=C?new jt(u(C),C):null;S.rect.current=R,R&&w.set(S.id,R)}return w}return x},[e,s,n,d,u]);return f.useEffect(()=>{l.current=e},[e]),f.useEffect(()=>{d||g()},[n,d]),f.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),f.useEffect(()=>{d||typeof a!="number"||p.current!==null||(p.current=setTimeout(()=>{g(),p.current=null},a))},[a,d,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:s!=null};function v(){switch(c){case Fe.Always:return!1;case Fe.BeforeDragging:return n;default:return!n}}}function Pn(e,t){return Ue(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Vo(e,t){return Pn(e,t)}function Yo(e){let{callback:t,disabled:n}=e;const r=Tt(t),o=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return f.useEffect(()=>()=>o?.disconnect(),[o]),o}function ut(e){let{callback:t,disabled:n}=e;const r=Tt(t),o=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return f.useEffect(()=>()=>o?.disconnect(),[o]),o}function Ko(e){return new jt(De(e),e)}function an(e,t,n){t===void 0&&(t=Ko);const[r,o]=f.useState(null);function s(){o(u=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=u??n)!=null?c:null}const l=t(e);return JSON.stringify(u)===JSON.stringify(l)?u:l})}const i=Yo({callback(u){if(e)for(const c of u){const{type:l,target:d}=c;if(l==="childList"&&d instanceof HTMLElement&&d.contains(e)){s();break}}}}),a=ut({callback:s});return ee(()=>{s(),e?(a?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),i?.disconnect())},[e]),r}function Jo(e){const t=Pn(e);return Mn(e,t)}const cn=[];function Go(e){const t=f.useRef(e),n=Ue(r=>e?r&&r!==cn&&e&&t.current&&e.parentNode===t.current.parentNode?r:lt(e):cn,[e]);return f.useEffect(()=>{t.current=e},[e]),n}function qo(e){const[t,n]=f.useState(null),r=f.useRef(e),o=f.useCallback(s=>{const i=bt(s.target);i&&n(a=>a?(a.set(i,At(i)),new Map(a)):null)},[]);return f.useEffect(()=>{const s=r.current;if(e!==s){i(s);const a=e.map(u=>{const c=bt(u);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,At(c)]):null}).filter(u=>u!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(s)};function i(a){a.forEach(u=>{const c=bt(u);c?.removeEventListener("scroll",o)})}},[o,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,i)=>we(s,i),J):jn(e):J,[e,t])}function ln(e,t){t===void 0&&(t=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},t),f.useEffect(()=>{const r=e!==J;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ze(e,n.current):J}function Zo(e){f.useEffect(()=>{if(!ct)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Qo(e,t){return f.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,t)},n},{}),[e,t])}function Bn(e){return f.useMemo(()=>e?Co(e):null,[e])}const un=[];function es(e,t){t===void 0&&(t=De);const[n]=e,r=Bn(n?z(n):null),[o,s]=f.useState(un);function i(){s(()=>e.length?e.map(u=>Tn(u)?r:new jt(t(u),u)):un)}const a=ut({callback:i});return ee(()=>{a?.disconnect(),i(),e.forEach(u=>a?.observe(u))},[e]),o}function ts(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return We(t)?t:e}function ns(e){let{measure:t}=e;const[n,r]=f.useState(null),o=f.useCallback(c=>{for(const{target:l}of c)if(We(l)){r(d=>{const h=t(l);return d?{...d,width:h.width,height:h.height}:h});break}},[t]),s=ut({callback:o}),i=f.useCallback(c=>{const l=ts(c);s?.disconnect(),l&&s?.observe(l),r(l?t(l):null)},[t,s]),[a,u]=rt(i);return f.useMemo(()=>({nodeRef:a,rect:n,setRef:u}),[n,a,u])}const rs=[{sensor:Bt,options:{}},{sensor:Lt,options:{}}],os={current:{}},Ze={draggable:{measure:tn},droppable:{measure:tn,strategy:Fe.WhileDragging,frequency:Mt.Optimized},dragOverlay:{measure:De}};class Pe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const ss={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Pe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ot},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ze,measureDroppableContainers:ot,windowRect:null,measuringScheduled:!1},is={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ot,draggableNodes:new Map,over:null,measureDroppableContainers:ot},dt=f.createContext(is),zn=f.createContext(ss);function as(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Pe}}}function cs(e,t){switch(t.type){case O.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case O.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case O.DragEnd:case O.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case O.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Pe(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case O.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Pe(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case O.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Pe(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function ls(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=f.useContext(dt),s=Rt(r),i=Rt(n?.id);return f.useEffect(()=>{if(!t&&!r&&s&&i!=null){if(!_t(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:u,node:c}=a;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const l of[u.current,c.current]){if(!l)continue;const d=Qr(l);if(d){d.focus();break}}})}},[r,t,o,i,s]),null}function us(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function ds(e){return f.useMemo(()=>({draggable:{...Ze.draggable,...e?.draggable},droppable:{...Ze.droppable,...e?.droppable},dragOverlay:{...Ze.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function fs(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=f.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;ee(()=>{if(!i&&!a||!t){s.current=!1;return}if(s.current||!r)return;const c=t?.node.current;if(!c||c.isConnected===!1)return;const l=n(c),d=Mn(l,r);if(i||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=In(c);h&&h.scrollBy({top:d.y,left:d.x})}},[t,i,a,r,n])}const $n=f.createContext({...J,scaleX:1,scaleY:1});var fe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(fe||(fe={}));const hs=f.memo(function(t){var n,r,o,s;let{id:i,accessibility:a,autoScroll:u=!0,children:c,sensors:l=rs,collisionDetection:d=po,measuring:h,modifiers:g,...p}=t;const b=f.useReducer(cs,void 0,as),[v,x]=b,[w,S]=so(),[C,R]=f.useState(fe.Uninitialized),A=C===fe.Initialized,{draggable:{active:D,nodes:m,translate:I},droppable:{containers:N}}=v,M=D!=null?m.get(D):null,Y=f.useRef({initial:null,translated:null}),K=f.useMemo(()=>{var j;return D!=null?{id:D,data:(j=M?.data)!=null?j:os,rect:Y}:null},[D,M]),G=f.useRef(null),[Re,Xe]=f.useState(null),[$,Ve]=f.useState(null),te=Be(p,Object.values(p)),Ee=He("DndDescribedBy",i),Ye=f.useMemo(()=>N.getEnabled(),[N]),B=ds(h),{droppableRects:ne,measureDroppableContainers:he,measuringScheduled:Ae}=Xo(Ye,{dragging:A,dependencies:[I.x,I.y],config:B.droppable}),H=Uo(m,D),Ke=f.useMemo(()=>$?Et($):null,[$]),ie=er(),re=Vo(H,B.draggable.measure);fs({activeNode:D!=null?m.get(D):null,config:ie.layoutShiftCompensation,initialRect:re,measure:B.draggable.measure});const k=an(H,B.draggable.measure,re),ke=an(H?H.parentElement:null),q=f.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:m,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ge=N.getNodeFor((n=q.current.over)==null?void 0:n.id),oe=ns({measure:B.dragOverlay.measure}),ve=(r=oe.nodeRef.current)!=null?r:H,pe=A?(o=oe.rect)!=null?o:k:null,$t=!!(oe.nodeRef.current&&oe.rect),Ft=Jo($t?null:k),ft=Bn(ve?z(ve):null),ae=Go(A?ge??H:null),Je=es(ae),Ge=us(g,{transform:{x:I.x-Ft.x,y:I.y-Ft.y,scaleX:1,scaleY:1},activatorEvent:$,active:K,activeNodeRect:k,containerNodeRect:ke,draggingNodeRect:pe,over:q.current.over,overlayNodeRect:oe.rect,scrollableAncestors:ae,scrollableAncestorRects:Je,windowRect:ft}),Wt=Ke?we(Ke,I):null,Ut=qo(ae),Yn=ln(Ut),Kn=ln(Ut,[k]),be=we(Ge,Yn),me=pe?yo(pe,Ge):null,Me=K&&me?d({active:K,collisionRect:me,droppableRects:ne,droppableContainers:Ye,pointerCoordinates:Wt}):null,Ht=kn(Me,"id"),[ce,Xt]=f.useState(null),Jn=$t?Ge:we(Ge,Kn),Gn=bo(Jn,(s=ce?.rect)!=null?s:null,k),ht=f.useRef(null),Vt=f.useCallback((j,F)=>{let{sensor:W,options:le}=F;if(G.current==null)return;const X=m.get(G.current);if(!X)return;const U=j.nativeEvent,Z=new W({active:G.current,activeNode:X,event:U,options:le,context:q,onAbort(_){if(!m.get(_))return;const{onDragAbort:Q}=te.current,se={id:_};Q?.(se),w({type:"onDragAbort",event:se})},onPending(_,ue,Q,se){if(!m.get(_))return;const{onDragPending:Ne}=te.current,de={id:_,constraint:ue,initialCoordinates:Q,offset:se};Ne?.(de),w({type:"onDragPending",event:de})},onStart(_){const ue=G.current;if(ue==null)return;const Q=m.get(ue);if(!Q)return;const{onDragStart:se}=te.current,Ie={activatorEvent:U,active:{id:ue,data:Q.data,rect:Y}};_e.unstable_batchedUpdates(()=>{se?.(Ie),R(fe.Initializing),x({type:O.DragStart,initialCoordinates:_,active:ue}),w({type:"onDragStart",event:Ie}),Xe(ht.current),Ve(U)})},onMove(_){x({type:O.DragMove,coordinates:_})},onEnd:ye(O.DragEnd),onCancel:ye(O.DragCancel)});ht.current=Z;function ye(_){return async function(){const{active:Q,collisions:se,over:Ie,scrollAdjustedTranslate:Ne}=q.current;let de=null;if(Q&&Ne){const{cancelDrop:Oe}=te.current;de={activatorEvent:U,active:Q,collisions:se,delta:Ne,over:Ie},_===O.DragEnd&&typeof Oe=="function"&&await Promise.resolve(Oe(de))&&(_=O.DragCancel)}G.current=null,_e.unstable_batchedUpdates(()=>{x({type:_}),R(fe.Uninitialized),Xt(null),Xe(null),Ve(null),ht.current=null;const Oe=_===O.DragEnd?"onDragEnd":"onDragCancel";if(de){const gt=te.current[Oe];gt?.(de),w({type:Oe,event:de})}})}}},[m]),qn=f.useCallback((j,F)=>(W,le)=>{const X=W.nativeEvent,U=m.get(le);if(G.current!==null||!U||X.dndKit||X.defaultPrevented)return;const Z={active:U};j(W,F.options,Z)===!0&&(X.dndKit={capturedBy:F.sensor},G.current=le,Vt(W,F))},[m,Vt]),Yt=Ho(l,qn);Zo(l),ee(()=>{k&&C===fe.Initializing&&R(fe.Initialized)},[k,C]),f.useEffect(()=>{const{onDragMove:j}=te.current,{active:F,activatorEvent:W,collisions:le,over:X}=q.current;if(!F||!W)return;const U={active:F,activatorEvent:W,collisions:le,delta:{x:be.x,y:be.y},over:X};_e.unstable_batchedUpdates(()=>{j?.(U),w({type:"onDragMove",event:U})})},[be.x,be.y]),f.useEffect(()=>{const{active:j,activatorEvent:F,collisions:W,droppableContainers:le,scrollAdjustedTranslate:X}=q.current;if(!j||G.current==null||!F||!X)return;const{onDragOver:U}=te.current,Z=le.get(Ht),ye=Z&&Z.rect.current?{id:Z.id,rect:Z.rect.current,data:Z.data,disabled:Z.disabled}:null,_={active:j,activatorEvent:F,collisions:W,delta:{x:X.x,y:X.y},over:ye};_e.unstable_batchedUpdates(()=>{Xt(ye),U?.(_),w({type:"onDragOver",event:_})})},[Ht]),ee(()=>{q.current={activatorEvent:$,active:K,activeNode:H,collisionRect:me,collisions:Me,droppableRects:ne,draggableNodes:m,draggingNode:ve,draggingNodeRect:pe,droppableContainers:N,over:ce,scrollableAncestors:ae,scrollAdjustedTranslate:be},Y.current={initial:pe,translated:me}},[K,H,Me,me,m,ve,pe,ne,N,ce,ae,be]),$o({...ie,delta:I,draggingRect:me,pointerCoordinates:Wt,scrollableAncestors:ae,scrollableAncestorRects:Je});const Zn=f.useMemo(()=>({active:K,activeNode:H,activeNodeRect:k,activatorEvent:$,collisions:Me,containerNodeRect:ke,dragOverlay:oe,draggableNodes:m,droppableContainers:N,droppableRects:ne,over:ce,measureDroppableContainers:he,scrollableAncestors:ae,scrollableAncestorRects:Je,measuringConfiguration:B,measuringScheduled:Ae,windowRect:ft}),[K,H,k,$,Me,ke,oe,m,N,ne,ce,he,ae,Je,B,Ae,ft]),Qn=f.useMemo(()=>({activatorEvent:$,activators:Yt,active:K,activeNodeRect:k,ariaDescribedById:{draggable:Ee},dispatch:x,draggableNodes:m,over:ce,measureDroppableContainers:he}),[$,Yt,K,k,x,Ee,m,ce,he]);return L.createElement(An.Provider,{value:S},L.createElement(dt.Provider,{value:Qn},L.createElement(zn.Provider,{value:Zn},L.createElement($n.Provider,{value:Gn},c)),L.createElement(ls,{disabled:a?.restoreFocus===!1})),L.createElement(co,{...a,hiddenTextDescribedById:Ee}));function er(){const j=Re?.autoScrollEnabled===!1,F=typeof u=="object"?u.enabled===!1:u===!1,W=A&&!j&&!F;return typeof u=="object"?{...u,enabled:W}:{enabled:W}}}),gs=f.createContext(null),dn="button",vs="Draggable";function ps(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=He(vs),{activators:i,activatorEvent:a,active:u,activeNodeRect:c,ariaDescribedById:l,draggableNodes:d,over:h}=f.useContext(dt),{role:g=dn,roleDescription:p="draggable",tabIndex:b=0}=o??{},v=u?.id===t,x=f.useContext(v?$n:gs),[w,S]=rt(),[C,R]=rt(),A=Qo(i,t),D=Be(n);ee(()=>(d.set(t,{id:t,key:s,node:w,activatorNode:C,data:D}),()=>{const I=d.get(t);I&&I.key===s&&d.delete(t)}),[d,t]);const m=f.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":v&&g===dn?!0:void 0,"aria-roledescription":p,"aria-describedby":l.draggable}),[r,g,b,v,p,l.draggable]);return{active:u,activatorEvent:a,activeNodeRect:c,attributes:m,isDragging:v,listeners:r?void 0:A,node:w,over:h,setNodeRef:S,setActivatorNodeRef:R,transform:x}}function bs(){return f.useContext(zn)}const ms="Droppable",ys={timeout:25};function ws(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=He(ms),{active:i,dispatch:a,over:u,measureDroppableContainers:c}=f.useContext(dt),l=f.useRef({disabled:n}),d=f.useRef(!1),h=f.useRef(null),g=f.useRef(null),{disabled:p,updateMeasurementsFor:b,timeout:v}={...ys,...o},x=Be(b??r),w=f.useCallback(()=>{if(!d.current){d.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),g.current=null},v)},[v]),S=ut({callback:w,disabled:p||!i}),C=f.useCallback((m,I)=>{S&&(I&&(S.unobserve(I),d.current=!1),m&&S.observe(m))},[S]),[R,A]=rt(C),D=Be(t);return f.useEffect(()=>{!S||!R.current||(S.disconnect(),d.current=!1,S.observe(R.current))},[R,S]),f.useEffect(()=>(a({type:O.RegisterDroppable,element:{id:r,key:s,disabled:n,node:R,rect:h,data:D}}),()=>a({type:O.UnregisterDroppable,key:s,id:r})),[r]),f.useEffect(()=>{n!==l.current.disabled&&(a({type:O.SetDroppableDisabled,id:r,key:s,disabled:n}),l.current.disabled=n)},[r,s,n,a]),{active:i,rect:h,isOver:u?.id===r,node:R,over:u,setNodeRef:A}}function zt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function xs(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function qe(e){return e!==null&&e>=0}function Ss(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Cs(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Fn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=zt(t,r,n),i=t[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},Wn="Sortable",Un=L.createContext({activeIndex:-1,containerId:Wn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Fn,disabled:{draggable:!1,droppable:!1}});function Ds(e){let{children:t,id:n,items:r,strategy:o=Fn,disabled:s=!1}=e;const{active:i,dragOverlay:a,droppableRects:u,over:c,measureDroppableContainers:l}=bs(),d=He(Wn,n),h=a.rect!==null,g=f.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),p=i!=null,b=i?g.indexOf(i.id):-1,v=c?g.indexOf(c.id):-1,x=f.useRef(g),w=!Ss(g,x.current),S=v!==-1&&b===-1||w,C=Cs(s);ee(()=>{w&&p&&l(g)},[w,g,p,l]),f.useEffect(()=>{x.current=g},[g]);const R=f.useMemo(()=>({activeIndex:b,containerId:d,disabled:C,disableTransforms:S,items:g,overIndex:v,useDragOverlay:h,sortedRects:xs(g,u),strategy:o}),[b,d,C.draggable,C.droppable,S,g,v,u,h,o]);return L.createElement(Un.Provider,{value:R},t)}const Rs=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return zt(n,r,o).indexOf(t)},Es=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:u,transition:c}=e;return!c||!r||a!==s&&o===i?!1:n?!0:i!==o&&t===u},As={duration:200,easing:"ease"},Hn="transform",ks=$e.Transition.toString({property:Hn,duration:0,easing:"linear"}),Ms={roleDescription:"sortable"};function Is(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=f.useState(null),a=f.useRef(n);return ee(()=>{if(!t&&n!==a.current&&r.current){const u=o.current;if(u){const c=De(r.current,{ignoreTransform:!0}),l={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(l.x||l.y)&&i(l)}}n!==a.current&&(a.current=n)},[t,n,r,o]),f.useEffect(()=>{s&&i(null)},[s]),s}function Ns(e){let{animateLayoutChanges:t=Es,attributes:n,disabled:r,data:o,getNewIndex:s=Rs,id:i,strategy:a,resizeObserverConfig:u,transition:c=As}=e;const{items:l,containerId:d,activeIndex:h,disabled:g,disableTransforms:p,sortedRects:b,overIndex:v,useDragOverlay:x,strategy:w}=f.useContext(Un),S=Os(r,g),C=l.indexOf(i),R=f.useMemo(()=>({sortable:{containerId:d,index:C,items:l},...o}),[d,o,C,l]),A=f.useMemo(()=>l.slice(l.indexOf(i)),[l,i]),{rect:D,node:m,isOver:I,setNodeRef:N}=ws({id:i,data:R,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...u}}),{active:M,activatorEvent:Y,activeNodeRect:K,attributes:G,setNodeRef:Re,listeners:Xe,isDragging:$,over:Ve,setActivatorNodeRef:te,transform:Ee}=ps({id:i,data:R,attributes:{...Ms,...n},disabled:S.draggable}),Ye=Jr(N,Re),B=!!M,ne=B&&!p&&qe(h)&&qe(v),he=!x&&$,Ae=he&&ne?Ee:null,Ke=ne?Ae??(a??w)({rects:b,activeNodeRect:K,activeIndex:h,overIndex:v,index:C}):null,ie=qe(h)&&qe(v)?s({id:i,items:l,activeIndex:h,overIndex:v}):C,re=M?.id,k=f.useRef({activeId:re,items:l,newIndex:ie,containerId:d}),ke=l!==k.current.items,q=t({active:M,containerId:d,isDragging:$,isSorting:B,id:i,index:C,items:l,newIndex:k.current.newIndex,previousItems:k.current.items,previousContainerId:k.current.containerId,transition:c,wasDragging:k.current.activeId!=null}),ge=Is({disabled:!q,index:C,node:m,rect:D});return f.useEffect(()=>{B&&k.current.newIndex!==ie&&(k.current.newIndex=ie),d!==k.current.containerId&&(k.current.containerId=d),l!==k.current.items&&(k.current.items=l)},[B,ie,d,l]),f.useEffect(()=>{if(re===k.current.activeId)return;if(re!=null&&k.current.activeId==null){k.current.activeId=re;return}const ve=setTimeout(()=>{k.current.activeId=re},50);return()=>clearTimeout(ve)},[re]),{active:M,activeIndex:h,attributes:G,data:R,rect:D,index:C,newIndex:ie,items:l,isOver:I,isSorting:B,isDragging:$,listeners:Xe,node:m,overIndex:v,over:Ve,setNodeRef:Ye,setActivatorNodeRef:te,setDroppableNodeRef:N,setDraggableNodeRef:Re,transform:ge??Ke,transition:oe()};function oe(){if(ge||ke&&k.current.newIndex===C)return ks;if(!(he&&!_t(Y)||!c)&&(B||q))return $e.Transition.toString({...c,property:Hn})}}function Os(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function it(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Ts=[E.Down,E.Right,E.Up,E.Left],_s=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:i,scrollableAncestors:a}}=t;if(Ts.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];s.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=o.get(d.id);if(h)switch(e.code){case E.Down:r.top<h.top&&u.push(d);break;case E.Up:r.top>h.top&&u.push(d);break;case E.Left:r.left>h.left&&u.push(d);break;case E.Right:r.left<h.left&&u.push(d);break}});const c=go({collisionRect:r,droppableRects:o,droppableContainers:u});let l=kn(c,"id");if(l===i?.id&&c.length>1&&(l=c[1].id),l!=null){const d=s.get(n.id),h=s.get(l),g=h?o.get(h.id):null,p=h?.node.current;if(p&&g&&d&&h){const v=lt(p).some((A,D)=>a[D]!==A),x=Xn(d,h),w=js(d,h),S=v||!x?{x:0,y:0}:{x:w?r.width-g.width:0,y:w?r.height-g.height:0},C={x:g.left,y:g.top};return S.x&&S.y?C:ze(C,S)}}}};function Xn(e,t){return!it(e)||!it(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function js(e,t){return!it(e)||!it(t)||!Xn(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Vn=4;function Ls({id:e,index:t,player:n,playersLength:r,onPlayerChange:o,onKeyDown:s,onRemove:i}){const{attributes:a,listeners:u,setNodeRef:c,transform:l,transition:d,isDragging:h}=Ns({id:e}),g={transform:$e.Transform.toString(l),transition:d,opacity:h?.5:1};return y.jsxs("div",{ref:c,style:g,className:"grid grid-cols-[30px_30px_minmax(0,1fr)_30px] items-center gap-3",children:[y.jsx("button",{...a,...u,className:"text-gray-400 hover:text-gray-600 transition-colors cursor-grab active:cursor-grabbing touch-none","aria-label":"Drag to reorder",children:y.jsx($r,{size:20})}),y.jsxs("span",{className:"text-gray-400 font-medium text-lg",children:[t+1,"."]}),y.jsx("input",{id:`player-${t}`,type:"text",value:n,onChange:p=>o(t,p.target.value),onKeyDown:p=>s(p,t),placeholder:t===0?"Enter names here":"",className:"bg-transparent text-gray-900 text-lg placeholder-gray-400 focus:outline-none"}),y.jsx("div",{className:"w-[30px] flex justify-center",children:r>Vn&&y.jsx("button",{onClick:()=>i(t),className:"text-gray-400 hover:text-gray-600 transition-colors",children:y.jsx(Hr,{size:20})})})]})}function Ps(){const[e,t]=Dt(Dn),[,n]=f.useState(null),r=lo(Qt(Bt,{activationConstraint:{distance:8}}),Qt(Lt,{coordinateGetter:_s})),o=(l,d)=>{const h=[...e];h[l]=d,t(h)};function s(l,d){if(l.key==="Enter")if(d===e.length-1)l.preventDefault(),t([...e,""]);else{const h=document.getElementById(`player-${d+1}`);h&&h.focus()}}function i(l,d){if(l.key!=="Backspace"||e[d]!==""||d===0)return;l.preventDefault(),u(d);const h=document.getElementById(`player-${d-1}`);h&&h.focus()}const a=(l,d)=>{s(l,d),i(l,d)};f.useEffect(()=>{if(e.length>0){const l=e.length-1;document.getElementById(`player-${l}`)?.focus()}},[e.length]);function u(l){if(e.length>Vn){const d=e.filter((h,g)=>g!==l);t(d)}}const c=l=>{const{active:d,over:h}=l;if(h&&d.id!==h.id){const g=e.findIndex((b,v)=>`player-${v}`===d.id),p=e.findIndex((b,v)=>`player-${v}`===h.id);t(zt(e,g,p))}n(null)};return y.jsxs(y.Fragment,{children:[y.jsx(hs,{sensors:r,onDragStart:({active:l})=>{n(l)},onDragEnd:c,onDragCancel:()=>{n(null)},children:y.jsx(Ds,{items:e.map((l,d)=>`player-${d}`),children:y.jsx("div",{className:"space-y-3",children:e.map((l,d)=>y.jsx(Ls,{id:`player-${d}`,index:d,player:l,playersLength:e.length,onPlayerChange:o,onKeyDown:a,onRemove:u},`player-${d}`))})})}),y.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:y.jsx("button",{onClick:()=>t([...e,""]),className:"text-gray-400 italic text-base hover:text-gray-600 transition-colors text-left",children:"Press Enter ↵ or click here to add more"})})]})}function Bs(e){const{team1:t,team2:n}=e;return t.every(r=>!!r)&&n.every(r=>!!r)}const zs=()=>{const[e,t]=Dt(Kr),[n,r]=Dt(Dn),o=()=>{const a=n.length,u=sr(a);if(!u){alert("Failed to generate schedule. Please check the number of players.");return}t(u),n.length||r(Array.from({length:a},(c,l)=>`Player ${l+1}`))},s=a=>n[a-1]||"Bye",i=e?"Regenerate bracket":"Generate bracket";return y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-8",children:y.jsxs("div",{className:"max-w-6xl mx-auto",children:[y.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Wr,{className:"w-8 h-8 text-green-600"}),y.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Pickleball Bracket Maker"})]})}),y.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8",children:[y.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Player Names"}),y.jsx("div",{className:"mb-8",children:y.jsx(Ps,{})}),y.jsx("button",{onClick:o,className:"flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors",children:i})]}),e&&y.jsx(y.Fragment,{children:y.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[y.jsx(Br,{className:"w-6 h-6 text-green-600"}),y.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Schedule (",e.games.length," rounds)"]})]}),y.jsx("div",{className:"space-y-6",children:e.games.map((a,u)=>y.jsxs("div",{className:"border-l-4 border-green-500 px-6 py-4 bg-gray-50 rounded-r-lg",children:[y.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:["Round ",u+1]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((c,l)=>y.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200",children:[y.jsxs("div",{className:"text-sm font-semibold text-green-600 mb-3",children:["Court ",c.court]}),Bs(c)?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"space-y-2",children:[y.jsx("div",{className:"flex items-center gap-2",children:y.jsxs("span",{className:"text-blue-600 font-medium",children:[s(c.team1[0])," &"," ",s(c.team1[1])]})}),y.jsx("div",{className:"text-gray-400 text-xs font-semibold",children:"VS"}),y.jsx("div",{className:"flex items-center gap-2",children:y.jsxs("span",{className:"text-purple-600 font-medium",children:[s(c.team2[0])," &"," ",s(c.team2[1])]})})]})}):y.jsxs(y.Fragment,{children:[y.jsx("div",{children:"Byes:"}),y.jsx("ul",{className:"list-disc list-inside text-gray-600",children:[...c.team1,...c.team2].filter(d=>d!==null).map(d=>y.jsx("li",{children:s(d)},d))})]})]},l))})]},u))})]})})]})})};function Fs(){return y.jsx(zs,{})}export{Fs as component};
